import React, { useEffect, useRef } from "react";
import { gsap } from "gsap";
import { MorphSVGPlugin } from "gsap/MorphSVGPlugin";

gsap.registerPlugin(MorphSVGPlugin);

const Loader = () => {
	const pathsRef = useRef([]);
	const startPathRef = useRef(null);
	const targetPathRef1 = useRef(null);
	const targetPathRef2 = useRef(null);
	const targetPathRef3 = useRef(null);

	useEffect(() => {
		if (
			!startPathRef.current ||
			!targetPathRef1.current ||
			!targetPathRef2.current ||
			!targetPathRef3.current
		)
			return;

		const tl = gsap.timeline({ repeat: 0, yoyo: false, delay: 1 });

		tl.to(startPathRef.current, {
			duration: 1,
			morphSVG: targetPathRef1.current,
			ease: "power1.inOut",
		})
			.to(startPathRef.current, {
				duration: 1,
				morphSVG: targetPathRef2.current,
				ease: "power1.inOut",
			})
			.to(startPathRef.current, {
				duration: 1,
				morphSVG: targetPathRef3.current,
				ease: "power1.inOut",
			})

		return () => {
			tl.kill();
		};
	}, []);

	return (
		<div className="loader">
			<svg
				className="loader-x"
				width="113"
				height="156"
				viewBox="0 0 113 156"
				fill="none"
				xmlns="http://www.w3.org/2000/svg"
			>
				<path
					ref={(el) => (pathsRef.current[0] = el)}
					d="M0.469971 0H14.74L56.54 69.22L98.88 0H112.15L63.94 77.24L112.51 155.35H97.7L56.7 88.07L14.9 155.35H0.999969L49.28 79.73L0.469971 0Z"
					stroke="#3D1D0F"
					fill="#transparent"
				/>
			</svg>
			<svg
				className="loader-xocolate"
				width="191"
				height="28"
				viewBox="0 0 191 28"
				fill="none"
				xmlns="http://www.w3.org/2000/svg"
			>
				<path
					ref={startPathRef}
					d="M36.6201 0.480469C38.3832 0.403338 40.1431 0.695714 41.7861 1.33984C43.4291 1.98397 44.9192 2.96494 46.1602 4.21973C48.5734 6.713 49.7761 10.0465 49.7695 14.2197C49.7629 18.3929 48.56 21.7264 46.1602 24.2197C44.9075 25.4611 43.4109 26.4304 41.7656 27.0654C40.1205 27.7004 38.3613 27.988 36.5996 27.9102C34.8308 27.9824 33.0663 27.6899 31.415 27.0518C29.7637 26.4136 28.2606 25.4433 27 24.2002C24.5734 21.7402 23.3563 18.4068 23.3496 14.2002C23.3429 9.99371 24.5664 6.66016 27.0195 4.2002C28.2785 2.95431 29.781 1.98083 31.4326 1.34082C33.0843 0.700812 34.8503 0.408222 36.6201 0.480469ZM89.9697 0.480469C91.7328 0.403326 93.4927 0.695768 95.1357 1.33984C96.7787 1.98394 98.2689 2.965 99.5098 4.21973C101.916 6.713 103.12 10.0465 103.12 14.2197C103.12 18.393 101.916 21.7264 99.5098 24.2197C96.8859 26.5942 93.4733 27.9092 89.9346 27.9092C86.396 27.9091 82.9841 26.594 80.3604 24.2197V24.2002C77.9204 21.7402 76.7033 18.4068 76.71 14.2002C76.7166 9.99355 77.9368 6.66019 80.3701 4.2002C81.6291 2.95427 83.1316 1.98083 84.7832 1.34082C86.4347 0.700933 88.2001 0.408265 89.9697 0.480469ZM61.8516 1.32422C63.5872 0.685631 65.4327 0.398861 67.2803 0.480469C69.856 0.417678 72.4167 0.890703 74.7998 1.87012L74.4502 2.98047C73.5053 2.57822 72.5191 2.27918 71.5098 2.08984C70.2242 1.81838 68.9135 1.68078 67.5996 1.67969C65.8904 1.6002 64.1826 1.86559 62.5781 2.45996C60.9735 3.05439 59.5047 3.96569 58.2598 5.13965C55.997 7.60442 54.7413 10.8289 54.7412 14.1748C54.7412 17.5207 55.9971 20.7452 58.2598 23.21C59.4984 24.3826 60.9602 25.2948 62.5576 25.8926C64.1548 26.4902 65.8557 26.7618 67.5596 26.6904C68.8806 26.6874 70.1984 26.5468 71.4902 26.2705C72.5159 26.0827 73.5208 25.7942 74.4902 25.4102L74.8096 26.5703C72.4096 27.4959 69.852 27.9437 67.2803 27.8896C65.4274 27.9573 63.5793 27.6562 61.8438 27.0039C60.1083 26.3516 58.5195 25.3611 57.1699 24.0898C54.6455 21.3939 53.2413 17.8388 53.2412 14.1455C53.2412 10.452 54.6454 6.89628 57.1699 4.2002C58.5241 2.94046 60.1158 1.96288 61.8516 1.32422ZM11.2002 13.3398L20.5996 0.700195H22.3604L12.1904 14.2197L22.4404 27.6602H20.5195L11.2803 15.3496L1.90039 27.6602H0.0800781L10.2803 14.4697L0 0.700195H1.86035L11.2002 13.3398ZM109.91 0.700195V26.46H124.97V27.6602H108.44V0.660156L109.91 0.700195ZM149.67 27.6602H148.16L145.04 20.0898H130.04L126.96 27.6602H125.45L136.7 0.549805H138.46L149.67 27.6602ZM168.28 1.91016H158.48V27.6602H157.02V1.91016H147.28V0.700195H168.28V1.91016ZM190.16 0.700195V1.91016H173.44V13.96H187.85V15.1602H173.44V26.46H190.85V27.6602H171.98V0.660156L190.16 0.700195ZM41.2305 2.47656C39.7668 1.89047 38.1953 1.62286 36.6201 1.69043C35.038 1.6284 33.4603 1.89872 31.9893 2.48438C30.5184 3.07 29.1866 3.9575 28.0801 5.08984C25.9067 7.34984 24.8203 10.4002 24.8203 14.2402C24.8204 18.08 25.9069 21.1163 28.0801 23.3496C29.1917 24.4676 30.5222 25.3449 31.9883 25.9248C33.4542 26.5046 35.0242 26.7748 36.5996 26.7197C38.1685 26.7862 39.7344 26.5245 41.1963 25.9512C42.6583 25.3778 43.9845 24.5051 45.0898 23.3896C47.2163 21.1897 48.2802 18.1502 48.2803 14.2705C48.2803 10.3906 47.2236 7.32984 45.1104 5.08984C44.0171 3.9536 42.6942 3.06275 41.2305 2.47656ZM94.5811 2.47461C93.1173 1.88847 91.545 1.62156 89.9697 1.69043C88.3893 1.62648 86.8126 1.89348 85.3418 2.47559C83.871 3.05772 82.5383 3.94202 81.4297 5.07031C79.2633 7.33022 78.1766 10.38 78.1699 14.2197C78.1633 18.0597 79.2498 21.0968 81.4297 23.3301C82.5412 24.448 83.8719 25.3244 85.3379 25.9043C86.804 26.4842 88.3746 26.7553 89.9502 26.7002C91.5191 26.7667 93.085 26.505 94.5469 25.9316C96.0088 25.3582 97.3351 24.4855 98.4404 23.3701C100.58 21.1702 101.653 18.1401 101.66 14.2803C101.667 10.4203 100.6 7.35651 98.46 5.08984C97.3676 3.95261 96.0449 3.06085 94.5811 2.47461ZM130.46 18.8799H144.52L137.52 1.83008H137.46L130.46 18.8799Z"
					fill="#231F20"
				/>
			</svg>
			<svg
				style={{ display: "none" }}
				className="loader-xocolate"
				width="191"
				height="28"
				viewBox="0 0 191 28"
				fill="none"
				xmlns="http://www.w3.org/2000/svg"
			>
				<path
					ref={targetPathRef1}
					d="M151 1.5C163.786 1.5 170.42 8.37725 170.499 15.4941C170.578 22.6136 164.094 29.5 151.601 29.5V28.5C151.734 28.5 151.868 28.4977 152 28.4961V2.51562C151.671 2.50599 151.338 2.5 151 2.5V1.5ZM150.22 29.1104H148.71L145.59 21.54H130.59L127.51 29.1104H126L137.25 2H139.01L150.22 29.1104ZM108 1.5C113.302 1.50006 117.329 2.44551 120.057 3.90234C122.776 5.35482 124.277 7.36477 124.312 9.49121C124.348 11.6212 122.909 13.6388 120.265 15.0947C117.708 16.5019 113.958 17.4285 109.051 17.4932L125.473 28.2725L124.924 29.1084L109 18.6562V29H108V1.5ZM189.18 2.04004V3.25H172.46V15.2998H186.87V16.5H172.46V27.7998H189.87V29H171V2L189.18 2.04004ZM105 3.20996H95.2002V28.96H93.7402V3.20996H84V2H105V3.20996ZM153 28.4678C164.187 27.9793 169.567 21.636 169.499 15.5059C169.432 9.47484 164.087 3.23098 153 2.56055V28.4678ZM44.2197 28.1104H42.71L39.5898 20.54H24.5898L21.5098 28.1104H20L31.25 1H33.0098L44.2197 28.1104ZM53 0.5C58.3023 0.500058 62.3291 1.44551 65.0566 2.90234C67.7758 4.35482 69.2768 6.36477 69.3125 8.49121C69.348 10.6212 67.9094 12.6388 65.2646 14.0947C62.7081 15.5019 58.9581 16.4285 54.0508 16.4932L70.4727 27.2725L69.9238 28.1084L54 17.6562V28H53V0.5ZM20 2H1V14H15V15H1V28H0V1H20V2ZM49 28H48V1H49V28ZM131.01 20.3301H145.07L138.07 3.28027H138.01L131.01 20.3301ZM25.0098 19.3301H39.0703L32.0703 2.28027H32.0098L25.0098 19.3301ZM109 16.4941C113.819 16.4351 117.407 15.5259 119.783 14.2178C122.247 12.8614 123.34 11.1284 123.313 9.50879C123.286 7.8856 122.131 6.14502 119.585 4.78516C117.213 3.51802 113.694 2.62313 109 2.51172V16.4941ZM54 15.4941C58.8188 15.4351 62.4067 14.5259 64.7832 13.2178C67.2467 11.8614 68.3403 10.1284 68.3135 8.50879C68.2864 6.8856 67.1307 5.14502 64.585 3.78516C62.2126 2.51802 58.6939 1.62313 54 1.51172V15.4941Z"
					fill="#231F20"
				/>
			</svg>
			<svg
				style={{ display: "none" }}
				className="loader-xocolate"
				width="191"
				height="28"
				viewBox="0 0 191 28"
				fill="none"
				xmlns="http://www.w3.org/2000/svg"
			>
				<path
					ref={targetPathRef2}
					d="M4.68311 3.01904C5.40981 1.2418 7.27079 0.382465 9.41455 0.638184L9.41748 0.629395C10.9084 1.03556 11.9008 1.77171 12.3462 2.84033C12.7823 3.88749 12.6393 5.1294 12.1577 6.43311C11.5871 7.97779 10.4957 9.72655 9.07666 11.5737L17.4956 22.0962C17.6522 20.8148 17.635 19.3574 17.394 17.7104L18.3833 17.5659C18.6943 19.6917 18.655 21.5504 18.3413 23.1528L21.2798 26.8257L20.4985 27.4497L18.0347 24.3696C17.4892 26.1355 16.5781 27.5351 15.4302 28.5854C13.0912 30.7253 9.8573 31.3427 7.03662 30.7524C4.21928 30.1628 1.71877 28.3416 0.953613 25.5024C0.187817 22.6604 1.21104 18.9892 5.01807 14.8013L5.38916 15.1382L5.021 14.7983C6.03648 13.6983 6.97166 12.6179 7.80127 11.5786L6.49854 9.94971L6.48877 9.93799C4.4488 7.21643 3.96486 4.7765 4.68311 3.01904ZM186 3.49951C173.554 3.49967 167.572 10.1226 167.5 16.5054C167.43 22.8858 173.261 29.4993 185.399 29.4995V30.4995C172.906 30.4993 166.421 23.613 166.5 16.4937C166.58 9.377 173.214 2.49968 186 2.49951V3.49951ZM162 29.9995H161V2.99951H162V29.9995ZM8.44287 12.3794C7.62539 13.3933 6.72058 14.4325 5.75635 15.4771L5.75537 15.4761C2.06496 19.5367 1.27931 22.8656 1.91943 25.2417C2.56057 27.621 4.68338 29.2385 7.24072 29.7739C9.79493 30.3085 12.6872 29.7384 14.7544 27.8472C15.8891 26.809 16.7984 25.3488 17.2622 23.4048L8.44287 12.3794ZM153 27.4692V2.99951H154V28.9995L153.163 29.5474L137 4.82666V28.9995H136V2.99951H137L153 27.4692ZM95.0581 2.74072C99.1523 1.83345 103.619 3.40154 107.411 8.88818L107 9.17334L106.588 9.45752C102.975 4.22863 98.8882 2.91577 95.2749 3.71631C91.6044 4.52984 88.2768 7.55306 86.313 11.2817C84.3486 15.0117 83.8142 19.3189 85.5405 22.6577C87.2248 25.9145 91.1562 28.4219 98.4956 28.4956C102.169 28.0489 104.216 27.3972 105.449 26.188C106.57 25.0874 107.096 23.4466 107.415 20.7603H92.519V19.7603H108.519V20.7603H108.422C108.102 23.555 107.544 25.5327 106.149 26.9019C104.683 28.3399 102.384 29.0143 98.8286 29.4614V29.4995C91.0631 29.4994 86.5977 26.8774 84.6528 23.1167C82.7256 19.3893 83.3715 14.7212 85.4282 10.8159C87.4858 6.90912 91.0211 3.63552 95.0581 2.74072ZM50.27 2.01221C52.0331 1.93507 53.793 2.22746 55.436 2.87158C57.0791 3.51572 58.5691 4.49759 59.8101 5.75244C62.2232 8.24575 63.4271 11.5793 63.4204 15.7524C63.4137 19.9256 62.21 23.2592 59.8101 25.7524C58.5574 26.9937 57.0607 27.9622 55.4155 28.5972C53.7704 29.2321 52.0112 29.5197 50.2495 29.4419C48.4808 29.5142 46.7161 29.2225 45.0649 28.5845C43.4135 27.9463 41.9105 26.9751 40.6499 25.7319C38.2233 23.2719 37.0062 19.9386 36.9995 15.7319C36.9929 11.5253 38.2171 8.19192 40.6704 5.73193C41.9294 4.48616 43.4311 3.51253 45.0825 2.87256C46.7342 2.23255 48.5002 1.93996 50.27 2.01221ZM133.22 29.1099H131.709L128.59 21.5396H113.59L110.51 29.1099H109L120.25 1.99951H122.01L133.22 29.1099ZM64.9995 1.49951C70.3019 1.49952 74.3286 2.44503 77.0562 3.90186C79.7753 5.35426 81.2762 7.36434 81.312 9.49072C81.3475 11.6207 79.909 13.6383 77.2642 15.0942C74.7075 16.5014 70.9578 17.428 66.0503 17.4927L82.4731 28.2729L81.9243 29.1089L65.9995 18.6558V28.9995H64.9995V1.49951ZM54.8804 4.00928C53.4167 3.42313 51.8453 3.15459 50.27 3.22217C48.6879 3.16014 47.1102 3.43046 45.6392 4.01611C44.1683 4.60173 42.8364 5.48928 41.73 6.62158C39.5567 8.88158 38.4702 11.932 38.4702 15.772C38.4702 19.612 39.5566 22.649 41.73 24.8823C42.8416 26.0003 44.1722 26.8767 45.6382 27.4565C47.1041 28.0364 48.6741 28.3075 50.2495 28.2524C51.8184 28.3189 53.3843 28.0563 54.8462 27.4829C56.308 26.9095 57.6344 26.0377 58.7397 24.9224C60.8664 22.7224 61.9301 19.6821 61.9302 15.8022C61.9302 11.9222 60.8736 8.86158 58.7603 6.62158C57.6671 5.48537 56.3441 4.59545 54.8804 4.00928ZM114.01 20.3296H128.07L121.07 3.27979H121.01L114.01 20.3296ZM65.9995 16.4937C70.8185 16.4347 74.4062 15.5255 76.7827 14.2173C79.2464 12.8609 80.3398 11.1279 80.313 9.5083C80.2857 7.88515 79.1303 6.14445 76.5845 4.78467C74.212 3.51753 70.6936 2.6226 65.9995 2.51123V16.4937ZM9.27002 1.62744C7.45816 1.41945 6.11834 2.15166 5.60889 3.39795C5.08198 4.68737 5.3469 6.74793 7.28857 9.33838L8.43311 10.769C9.73578 9.05097 10.7114 7.46033 11.2192 6.08545C11.6621 4.88632 11.7191 3.93512 11.4233 3.2251C11.1451 2.55739 10.504 1.98678 9.27002 1.62744Z"
					fill="#231F20"
				/>
			</svg>
			<svg
				style={{ display: "none" }}
				className="loader-xocolate"
				width="191"
				height="28"
				viewBox="0 0 191 28"
				fill="none"
				xmlns="http://www.w3.org/2000/svg"
			>
				<path
					ref={targetPathRef3}
					d="M36.6201 0.480469C38.3832 0.403338 40.1431 0.695714 41.7861 1.33984C43.4291 1.98397 44.9192 2.96494 46.1602 4.21973C48.5734 6.713 49.7761 10.0465 49.7695 14.2197C49.7629 18.3929 48.56 21.7264 46.1602 24.2197C44.9075 25.4611 43.4109 26.4304 41.7656 27.0654C40.1205 27.7004 38.3613 27.988 36.5996 27.9102C34.8308 27.9824 33.0663 27.6899 31.415 27.0518C29.7637 26.4136 28.2606 25.4433 27 24.2002C24.5734 21.7402 23.3563 18.4068 23.3496 14.2002C23.3429 9.99371 24.5664 6.66016 27.0195 4.2002C28.2785 2.95431 29.781 1.98083 31.4326 1.34082C33.0843 0.700812 34.8503 0.408222 36.6201 0.480469ZM89.9697 0.480469C91.7328 0.403326 93.4927 0.695768 95.1357 1.33984C96.7787 1.98394 98.2689 2.965 99.5098 4.21973C101.916 6.713 103.12 10.0465 103.12 14.2197C103.12 18.393 101.916 21.7264 99.5098 24.2197C96.8859 26.5942 93.4733 27.9092 89.9346 27.9092C86.396 27.9091 82.9841 26.594 80.3604 24.2197V24.2002C77.9204 21.7402 76.7033 18.4068 76.71 14.2002C76.7166 9.99355 77.9368 6.66019 80.3701 4.2002C81.6291 2.95427 83.1316 1.98083 84.7832 1.34082C86.4347 0.700933 88.2001 0.408265 89.9697 0.480469ZM61.8516 1.32422C63.5872 0.685631 65.4327 0.398861 67.2803 0.480469C69.856 0.417678 72.4167 0.890703 74.7998 1.87012L74.4502 2.98047C73.5053 2.57822 72.5191 2.27918 71.5098 2.08984C70.2242 1.81838 68.9135 1.68078 67.5996 1.67969C65.8904 1.6002 64.1826 1.86559 62.5781 2.45996C60.9735 3.05439 59.5047 3.96569 58.2598 5.13965C55.997 7.60442 54.7413 10.8289 54.7412 14.1748C54.7412 17.5207 55.9971 20.7452 58.2598 23.21C59.4984 24.3826 60.9602 25.2948 62.5576 25.8926C64.1548 26.4902 65.8557 26.7618 67.5596 26.6904C68.8806 26.6874 70.1984 26.5468 71.4902 26.2705C72.5159 26.0827 73.5208 25.7942 74.4902 25.4102L74.8096 26.5703C72.4096 27.4959 69.852 27.9437 67.2803 27.8896C65.4274 27.9573 63.5793 27.6562 61.8438 27.0039C60.1083 26.3516 58.5195 25.3611 57.1699 24.0898C54.6455 21.3939 53.2413 17.8388 53.2412 14.1455C53.2412 10.452 54.6454 6.89628 57.1699 4.2002C58.5241 2.94046 60.1158 1.96288 61.8516 1.32422ZM11.2002 13.3398L20.5996 0.700195H22.3604L12.1904 14.2197L22.4404 27.6602H20.5195L11.2803 15.3496L1.90039 27.6602H0.0800781L10.2803 14.4697L0 0.700195H1.86035L11.2002 13.3398ZM109.91 0.700195V26.46H124.97V27.6602H108.44V0.660156L109.91 0.700195ZM149.67 27.6602H148.16L145.04 20.0898H130.04L126.96 27.6602H125.45L136.7 0.549805H138.46L149.67 27.6602ZM168.28 1.91016H158.48V27.6602H157.02V1.91016H147.28V0.700195H168.28V1.91016ZM190.16 0.700195V1.91016H173.44V13.96H187.85V15.1602H173.44V26.46H190.85V27.6602H171.98V0.660156L190.16 0.700195ZM41.2305 2.47656C39.7668 1.89047 38.1953 1.62286 36.6201 1.69043C35.038 1.6284 33.4603 1.89872 31.9893 2.48438C30.5184 3.07 29.1866 3.9575 28.0801 5.08984C25.9067 7.34984 24.8203 10.4002 24.8203 14.2402C24.8204 18.08 25.9069 21.1163 28.0801 23.3496C29.1917 24.4676 30.5222 25.3449 31.9883 25.9248C33.4542 26.5046 35.0242 26.7748 36.5996 26.7197C38.1685 26.7862 39.7344 26.5245 41.1963 25.9512C42.6583 25.3778 43.9845 24.5051 45.0898 23.3896C47.2163 21.1897 48.2802 18.1502 48.2803 14.2705C48.2803 10.3906 47.2236 7.32984 45.1104 5.08984C44.0171 3.9536 42.6942 3.06275 41.2305 2.47656ZM94.5811 2.47461C93.1173 1.88847 91.545 1.62156 89.9697 1.69043C88.3893 1.62648 86.8126 1.89348 85.3418 2.47559C83.871 3.05772 82.5383 3.94202 81.4297 5.07031C79.2633 7.33022 78.1766 10.38 78.1699 14.2197C78.1633 18.0597 79.2498 21.0968 81.4297 23.3301C82.5412 24.448 83.8719 25.3244 85.3379 25.9043C86.804 26.4842 88.3746 26.7553 89.9502 26.7002C91.5191 26.7667 93.085 26.505 94.5469 25.9316C96.0088 25.3582 97.3351 24.4855 98.4404 23.3701C100.58 21.1702 101.653 18.1401 101.66 14.2803C101.667 10.4203 100.6 7.35651 98.46 5.08984C97.3676 3.95261 96.0449 3.06085 94.5811 2.47461ZM130.46 18.8799H144.52L137.52 1.83008H137.46L130.46 18.8799Z"
					fill="#231F20"
				/>
			</svg>
		</div>
	);
};

export default Loader;
